<!DOCTYPE html>
<html>
<head>
	<title>测试datagrid添加</title>
	<meta charset="utf-8">
	<link rel="stylesheet" type="text/css" href="css/easyui.css">
	<link rel="stylesheet" type="text/css" href="css/icon.css">
	<link rel="stylesheet" type="text/css" href="css/app.css">
	<script type="text/javascript" src="js/jquery.min.js"></script>
	<script type="text/javascript" src="js/jquery.easyui.min.js"></script>
	<script type="text/javascript" src="js/easyui-lang-zh_CN.js"></script>
</head>
<body>
	<div class="easyui-panel" id="view_position_2">
		<div id="commodity_modify">
		<table id="data_grid" title="所有商品" class="easyui-datagrid" style="width:900px;height:380px"
		data-options="
		toolbar:'#toolbar',
		fitColumns:true,
		rownumbers:true	,
		singleSelect:true,
		">
		<thead>
			<tr>
			<!-- cname,tname,small_unit,big_unit,cnum,ccost,csticker_price,cunit_value  -->
				<th field="value1" width="80">值1</th>
				<th field="value2"  width="50">值2</th>
			</tr>
		</thead>
		</table>
		<div id="toolbar">
			<a href="#" class="easyui-linkbutton" iconCls="icon-add" plain="true" onclick="popDlg()">添加</a>
			<a href="#" class="easyui-linkbutton" iconCls="icon-no" plain="true" onclick="deleterow()">删除</a>
		</div>
		</div> <!-- commodity_modify div end -->
		<a href="javascript:submit()" class="easyui-linkbutton">提交</a>
		<!-- 对话框 -->
		<div id="dlg" class="easyui-dialog" style="width:400px;height:298px;padding:10px 20px"
		closed="true" buttons="#dlg-buttons">
		<form id="update_commodity" method="post" action="">
			<div class="dlg_body">
				<div>		
					<span><font>值1：</font></span>
					<span><input class="easyui-textbox" id="val1" data-options="" style="width:150px"></span>
				</div>
				<div>		
					<span>值2：</span>
					<span><input class="easyui-textbox" id="val2" data-options="" style="width:150px"></span>
				</div>
			</div>
		</form>
		</div> <!--  对话框结束-->
		<div id="dlg-buttons">
			<a href="#" class="easyui-linkbutton" iconCls="icon-ok" onclick="add()">修改</a>
			<a href="#" class="easyui-linkbutton" iconCls="icon-cancel" onclick="javascript:$('#dlg').dialog('close')">取消</a>
		</div>
	</div>
	<script>
		function popDlg() {	
			$('#dlg').dialog('open').dialog('setTitle','修改商品信息');
		}
		function add() {
			var val1 = $('#val1').val();
			var val2 = $('#val2').val();
			$('#data_grid').datagrid('appendRow',
				{
				value1:val1,
				value2:val2
				});
		}
		function deleterow() {
			var row = $('#data_grid').datagrid('getRowIndex',$('#data_grid').datagrid('getSelected'));
			$('#data_grid').datagrid('deleteRow',row);
		}
		function submit() {
			var data = $('#data_grid').datagrid('getData');
			alert(data);
		}
	</script>
</body>
</html>